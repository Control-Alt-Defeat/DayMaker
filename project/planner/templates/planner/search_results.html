{% extends 'base.html' %}
{% block title %}Search Results{% endblock %}
{% block content %}
<script>
$(function(){
	$('.eventStyle').click(function(){
        
		if($(".eventStyle").hasClass("color")){
            $(".eventStyle").removeClass("color");
            $(this).addClass("color");}
        else{
            $(this).addClass("color");
        }
	});
});
</script>
<div id="app" class="form-margin">
<h2 class="page-title">Search Results</h2>
<hr>
<form action="{% url 'planner:search_results' plan_id %}" method="post">
    {% csrf_token %}
    {% if search_results %}
      <div class = "eventRow">
        <div class="help-text-helper">
            <div class="page-title help-text">Choosing event for time window: {{ search_results.0.start_formatted }} - {{ search_results.0.end_formatted }}</div>
        </div>
        {% for result in search_results %}
        <div id="result_{{ forloop.counter }}" class="eventRow">
            <label><div class="eventStyle">
                <div class="buttonColumn eventDetails">
                    <input class="eventRadioButton" type="radio" name="choice" id="{{ result.id }}" value="{{ result.id }}" />
                </div>
                <div class="eventColumnMiddle">
                    <p class="eventTitle"> {{ result.location }}
                    </p>
                    <p class="eventDetails"> {{ result.type }} </p>
                    <p class="eventDetails"> {{result.rating}}/5 </p>
                </div>
                <div class="eventColumnRight">
                    <p> {{ result.address }} </p>
                    <p> {{ result.price }} </p>
                    <p> {{ result.distance|floatformat }} Miles</p>
                </div>
            </div></label>
        </div>
        {% endfor %}
        <input id="submit_button" name="Save Event" class="btn btn-success btn-block button-padding" type="submit" value="Add Event">

    {% else %}
    <div class="help-text-helper">
        <div class="page-title help-text">No search results are available. Try different search criteria!</div>
    </div>
    {% endif %}
    <div>
        <a href="{% url 'planner:plan' plan_id %}" class="btn btn-danger btn-block button-padding" role="button" >Back</a>
    </div>
    <div>
        <a href="{% url 'planner:index' plan_id %}" class="btn btn-primary btn-block button-padding" role="button" >Back to Plan</a>
    </div>
    </form>
</div>
{% endblock %}
